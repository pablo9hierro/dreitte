export default function handler(req, res) {
  res.setHeader('Content-Type', 'text/html; charset=utf-8');
  
  const html = [
    '<!DOCTYPE html>',
    '<html>',
    '<head>',
    '<meta charset="UTF-8">',
    '<title>TESTE 3 VERSOES</title>',
    '</head>',
    '<body>',
    '',
    '<h1 style="background: lightgreen; padding: 15px;">ðŸ§ª TESTE 3 VERSOES - QUAL O STEVO CONSEGUE LER?</h1>',
    '',
    '<hr>',
    '<h2 style="background: yellow; padding: 10px;">VERSAO 1: HTML PURO (Zero JavaScript)</h2>',
    '<div id="search-area-v1">',
    '  <h3>Catalogo Jana Dalecos</h3>',
    '  <ul>',
    '    <li><a href="https://www.danajalecos.com.br/shop/jalecos/masculinos/manoel/jaleco-manoel-azul-marinho/"><strong>JALECO MASCULINO MANOEL AZUL MARINHO</strong><br/>R$ 209,00 no PIX</a></li>',
    '    <li><a href="https://www.danajalecos.com.br/shop/jalecos/masculinos/samuel/jaleco-samuel-amarelo/"><strong>JALECO MASCULINO SAMUEL AMARELO</strong><br/>R$ 145,00 no PIX</a></li>',
    '    <li><a href="https://www.danajalecos.com.br/shop/scrubs/masculinos/manga-curta/scrub-azul-marinho/"><strong>SCRUB MASCULINO MANGA CURTA AZUL MARINHO</strong><br/>R$ 177,65 no PIX</a></li>',
    '  </ul>',
    '  <p>âœ… 3 produtos listados | HTML estÃ¡tico</p>',
    '</div>',
    '',
    '<hr>',
    '<h2 style="background: orange; padding: 10px;">VERSAO 2: COM JAVASCRIPT</h2>',
    '<div id="search-area-v2">',
    '  <h3>Catalogo Jana Dalecos</h3>',
    '  <ul id="lista-js"><li style="color: red;">JavaScript NAO executado</li></ul>',
    '  <p id="status-js" style="color: red;">Aguardando JavaScript...</p>',
    '</div>',
    '',
    '<script>',
    'var produtosJS = [',
    '  {nome: "JALECO MASCULINO MANOEL AZUL MARINHO", link: "https://www.danajalecos.com.br/shop/jalecos/masculinos/manoel/jaleco-manoel-azul-marinho/", preco: "R$ 209,00"},',
    '  {nome: "JALECO MASCULINO SAMUEL AMARELO", link: "https://www.danajalecos.com.br/shop/jalecos/masculinos/samuel/jaleco-samuel-amarelo/", preco: "R$ 145,00"},',
    '  {nome: "SCRUB MASCULINO MANGA CURTA AZUL MARINHO", link: "https://www.danajalecos.com.br/shop/scrubs/masculinos/manga-curta/scrub-azul-marinho/", preco: "R$ 177,65"}',
    '];',
    'function carregarJS() {',
    '  var lista = document.getElementById("lista-js");',
    '  lista.innerHTML = "";',
    '  for (var i = 0; i < produtosJS.length; i++) {',
    '    var li = document.createElement("li");',
    '    li.innerHTML = "<a href=\\"" + produtosJS[i].link + "\\"><strong>" + produtosJS[i].nome + "</strong><br/>" + produtosJS[i].preco + " no PIX</a>";',
    '    lista.appendChild(li);',
    '  }',
    '  document.getElementById("status-js").innerHTML = "<p style=\\"color: green;\\">âœ… JavaScript FOI EXECUTADO! " + produtosJS.length + " produtos</p>";',
    '}',
    'setTimeout(carregarJS, 100);',
    '</script>',
    '',
    '<hr>',
    '<h2>INSTRUCOES:</h2>',
    '<p><strong>Stevo, me diga:</strong></p>',
    '<ol>',
    '  <li>VocÃª vÃª a VERSAO 1 (fundo amarelo)?</li>',
    '  <li>VocÃª vÃª os 3 produtos da VERSAO 1?</li>',
    '  <li>VocÃª vÃª a VERSAO 2 (fundo laranja)?</li>',
    '  <li>Na VERSAO 2, vocÃª vÃª "JavaScript FOI EXECUTADO" (verde) ou "JavaScript NAO executado" (vermelho)?</li>',
    '  <li>Se vÃª verde, quantos produtos aparecem na VERSAO 2?</li>',
    '</ol>',
    '',
    '</body>',
    '</html>'
  ].join('\n');
  
  res.status(200).send(html);
}
